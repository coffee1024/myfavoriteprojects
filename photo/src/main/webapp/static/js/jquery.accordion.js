(function(a){a.ui=a.ui||{};a.fn.extend({accordion:function(i,h){var g=Array.prototype.slice.call(arguments,1);return this.each(function(){if(typeof i=="string"){var j=a.data(this,"ui-accordion");j[i].apply(j,g)}else{if(!a(this).is(".ui-accordion")){a.data(this,"ui-accordion",new a.ui.accordion(this,i))}}})},activate:function(g){return this.accordion("activate",g)}});a.ui.accordion=function(g,k){this.options=k=a.extend({},a.ui.accordion.defaults,k);this.element=g;a(g).addClass("ui-accordion");if(k.navigation){var h=a(g).find("a").filter(k.navigationFilter);if(h.length){if(h.filter(k.header).length){k.active=h}else{k.active=h.parent().parent().prev();h.addClass("current")}}}k.headers=a(g).find(k.header);k.active=d(k.headers,k.active);if(k.fillSpace){var i=a(g).parent().height();k.headers.each(function(){i-=a(this).outerHeight()});var j=0;k.headers.next().each(function(){j=Math.max(j,a(this).innerHeight()-a(this).height())}).height(i-j)}else{if(k.autoheight){var i=0;k.headers.next().each(function(){i=Math.max(i,a(this).outerHeight())}).height(i)}}k.headers.not(k.active||"").next().hide();k.active.parent().andSelf().addClass(k.selectedClass);if(k.event){a(g).bind((k.event)+".ui-accordion",b)}};a.ui.accordion.prototype={activate:function(g){b.call(this.element,{target:d(this.options.headers,g)[0]})},enable:function(){this.options.disabled=false},disable:function(){this.options.disabled=true},destroy:function(){this.options.headers.next().css("display","");if(this.options.fillSpace||this.options.autoheight){this.options.headers.next().css("height","")}a.removeData(this.element,"ui-accordion");a(this.element).removeClass("ui-accordion").unbind(".ui-accordion")}};function e(g,h){return function(){return g.apply(h,arguments)}}function c(g){if(!a.data(this,"ui-accordion")){return}var h=a.data(this,"ui-accordion");var i=h.options;i.running=g?0:--i.running;if(i.running){return}if(i.clearStyle){i.toShow.add(i.toHide).css({height:"",overflow:""})}a(this).triggerHandler("change.ui-accordion",[i.data],i.change)}function f(m,l,i,g,j){var k=a.data(this,"ui-accordion").options;k.toShow=m;k.toHide=l;k.data=i;var h=e(c,this);k.running=l.size()==0?m.size():l.size();if(k.animated){if(!k.alwaysOpen&&g){a.ui.accordion.animations[k.animated]({toShow:jQuery([]),toHide:l,complete:h,down:j,autoheight:k.autoheight})}else{a.ui.accordion.animations[k.animated]({toShow:m,toHide:l,complete:h,down:j,autoheight:k.autoheight})}}else{if(!k.alwaysOpen&&g){m.toggle()}else{l.hide();m.show()}h(true)}}function b(k){var l=a.data(this,"ui-accordion").options;if(l.disabled){return false}if(!k.target&&!l.alwaysOpen){l.active.parent().andSelf().toggleClass(l.selectedClass);var m=l.active.next(),i={instance:this,options:l,newHeader:jQuery([]),oldHeader:l.active,newContent:jQuery([]),oldContent:m},n=l.active=a([]);f.call(this,n,m,i);return false}var g=a(k.target);if(g.parents(l.header).length){while(!g.is(l.header)){g=g.parent()}}var h=g[0]==l.active[0];if(l.running||(l.alwaysOpen&&h)){return false}if(!g.is(l.header)){return}l.active.parent().andSelf().toggleClass(l.selectedClass);if(!h){g.parent().andSelf().addClass(l.selectedClass)}var n=g.next(),m=l.active.next(),i={instance:this,options:l,newHeader:g,oldHeader:l.active,newContent:n,oldContent:m},j=l.headers.index(l.active[0])>l.headers.index(g[0]);l.active=h?a([]):g;f.call(this,n,m,i,h,j);return false}function d(g,h){return h!=undefined?typeof h=="number"?g.filter(":eq("+h+")"):g.not(g.not(h)):h===false?a([]):g.filter(":eq(0)")}a.extend(a.ui.accordion,{defaults:{selectedClass:"selected",alwaysOpen:true,animated:"slide",event:"click",header:"a",autoheight:true,running:0,navigationFilter:function(){return this.href.toLowerCase()==location.href.toLowerCase()}},animations:{slide:function(j,g){j=a.extend({easing:"swing",duration:300},j,g);if(!j.toHide.size()){j.toShow.animate({height:"show"},j);return}var i=j.toHide.height(),k=j.toShow.height(),h=k/i;j.toShow.css({height:0,overflow:"hidden"}).show();j.toHide.filter(":hidden").each(j.complete).end().filter(":visible").animate({height:"hide"},{step:function(m){var l=(i-m)*h;if(a.browser.msie||a.browser.opera){l=Math.ceil(l)}j.toShow.height(l)},duration:j.duration,easing:j.easing,complete:function(){if(!j.autoheight){j.toShow.css("height","auto")}j.complete()}})},bounceslide:function(g){this.slide(g,{easing:g.down?"bounceout":"swing",duration:g.down?1000:200})},easeslide:function(g){this.slide(g,{easing:"easeinout",duration:700})}}})})(jQuery);